import{a as S,_ as R}from"./chunk-bae47101.js";import{_ as b,d as N,h as g,H as O,r as U,l as f,o as A,j as B,k as d,n as t,m as v,g as F,p as G,c as H,f as P,L as n,K as u,u as $,i as K,b as L,q as C,t as j,a as I,F as D,W as q}from"./chunk-3acec7f8.js";var E={prefix:"fas",iconName:"sitemap",icon:[576,512,[],"f0e8","M208 80c0-26.5 21.5-48 48-48h64c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-8v40H464c30.9 0 56 25.1 56 56v32h8c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H464c-26.5 0-48-21.5-48-48V368c0-26.5 21.5-48 48-48h8V288c0-4.4-3.6-8-8-8H312v40h8c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H256c-26.5 0-48-21.5-48-48V368c0-26.5 21.5-48 48-48h8V280H112c-4.4 0-8 3.6-8 8v32h8c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V368c0-26.5 21.5-48 48-48h8V288c0-30.9 25.1-56 56-56H264V192h-8c-26.5 0-48-21.5-48-48V80z"]},f2={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V232c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V392c0-13.3-10.7-24-24-24H40z"]},T={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192h42.7c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0H21.3C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7h42.7C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3H405.3zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352H378.7C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7H154.7c-14.7 0-26.7-11.9-26.7-26.7z"]},W={prefix:"fas",iconName:"gauge",icon:[512,512,["dashboard","gauge-med","tachometer-alt-average"],"f624","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm320 96c0-26.9-16.5-49.9-40-59.3V88c0-13.3-10.7-24-24-24s-24 10.7-24 24V292.7c-23.5 9.5-40 32.5-40 59.3c0 35.3 28.7 64 64 64s64-28.7 64-64zM144 176a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm-16 80a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM400 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},J=W,Q={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"]},X={prefix:"fas",iconName:"object-group",icon:[576,512,[],"f247","M32 119.4C12.9 108.4 0 87.7 0 64C0 28.7 28.7 0 64 0c23.7 0 44.4 12.9 55.4 32H456.6C467.6 12.9 488.3 0 512 0c35.3 0 64 28.7 64 64c0 23.7-12.9 44.4-32 55.4V392.6c19.1 11.1 32 31.7 32 55.4c0 35.3-28.7 64-64 64c-23.7 0-44.4-12.9-55.4-32H119.4c-11.1 19.1-31.7 32-55.4 32c-35.3 0-64-28.7-64-64c0-23.7 12.9-44.4 32-55.4V119.4zM456.6 96H119.4c-5.6 9.7-13.7 17.8-23.4 23.4V392.6c9.7 5.6 17.8 13.7 23.4 23.4H456.6c5.6-9.7 13.7-17.8 23.4-23.4V119.4c-9.7-5.6-17.8-13.7-23.4-23.4zM128 160c0-17.7 14.3-32 32-32H288c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160zM256 320h32c35.3 0 64-28.7 64-64V224h64c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H288c-17.7 0-32-14.3-32-32V320z"]},v2={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},Y={prefix:"fas",iconName:"desktop",icon:[576,512,[128421,61704,"desktop-alt"],"f390","M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64H240l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H346.7L336 416H512c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64zM512 64V288H64V64H512z"]};function m2(e){return b.get("/v1/group",e)}function h2(e){return b.delete("/v1/group/"+e)}function _2(e){return b.postForm("/v1/group",{name:e.name,password:e.password,contact:e.contact})}function Z(e,i){return b.putForm("/v1/group/"+e+"/credentials",{password:i})}const e2=N({__name:"ChangePasswd",props:{isFormOpen:{type:Boolean,default:!1}},emits:["RefreshList"],setup(e,{emit:i}){var s;const x=i,m=e,p=g(!1);O(()=>m.isFormOpen,a=>{p.value=a});const l={style:{width:"150px"}},V={span:14},w=(s=S.getGroup())==null?void 0:s.id,c=U({password1:"",password2:""}),r=g(!1),y=async()=>{var o;if(r.value=!0,c.password1!==c.password2){v.error("输入的密码不匹配"),r.value=!1;return}const a=await Z(w,c.password1);((o=a==null?void 0:a.data)==null?void 0:o.status)==0?(r.value=!1,v.success("密码修改成功"),c.password1="",c.password2="",x("RefreshList",{type:"add",isShow:!1})):(r.value=!1,v.error("密码修改失败"))},z=()=>{c.password1="",c.password2="",r.value=!1,x("RefreshList",{type:"cancel",isShow:!1})};return(a,o)=>{const h=f("a-input"),M=f("a-form"),k=f("a-modal");return A(),B(k,{open:p.value,"onUpdate:open":o[2]||(o[2]=_=>p.value=_),title:"修改密码","ok-text":"确定","cancel-text":"取消","confirm-loading":r.value,onOk:y,onCancel:z},{default:d(()=>[t(M,{model:c,"label-col":l,"wrapper-col":V},{default:d(()=>[t(h,{class:"form-input",value:c.password1,"onUpdate:value":o[0]||(o[0]=_=>c.password1=_),placeholder:"请输入密码"},null,8,["value"]),t(h,{class:"form-input",value:c.password2,"onUpdate:value":o[1]||(o[1]=_=>c.password2=_),placeholder:"请确认密码"},null,8,["value"])]),_:1},8,["model"])]),_:1},8,["open","confirm-loading"])}}}),a2=F(e2,[["__scopeId","data-v-39d6c687"]]),s2=e=>(G("data-v-5f912724"),e=e(),P(),e),c2={class:"header"},o2=s2(()=>H("img",{src:R,class:"logo"},null,-1)),t2={class:"user-menu"},n2={class:"username"},i2=N({__name:"Head",setup(e){var y,z;const i=g(!1),x=({isShow:s})=>{i.value=s},m=g(["overview"]),p=g([{key:"overview",icon:()=>n(u,{icon:J,style:{fontSize:"24px",margin:"8px 5px 0 0"}}),label:n("span",{style:{display:"inline-block",lineHeight:"38px",height:"45px",verticalAlign:"middle"}},"概览"),title:"概览"},{key:"device",icon:()=>n(u,{icon:E,style:{fontSize:"24px",margin:"8px 5px 0 0"}}),label:n("span",{style:{display:"inline-block",lineHeight:"38px",height:"45px",verticalAlign:"middle"}},"设备"),title:"设备"},{key:"totalview",icon:()=>n(u,{icon:X,style:{fontSize:"24px",margin:"8px 5px 0 0"}}),label:n("span",{style:{display:"inline-block",lineHeight:"38px",height:"45px",verticalAlign:"middle"}},"总览"),title:"总览"}]),l=$(),V=(y=S.getGroup())==null?void 0:y.name,w=(z=S.getGroup())==null?void 0:z.admin,c=s=>{const a=s.key;switch(localStorage.setItem("selectedMenu",a),a){case"device":l.push("/list");break;case"overview":l.push("/home");break;case"totalview":l.push("/totalview");break;case"vnc":l.push("/vnc");break;case"group":l.push("/group");break;case"automation":v.info("开发中");break;case"tasks":v.info("开发中");break}},r=async()=>{var a;const s=await b.delete("/v1/group/login");((a=s==null?void 0:s.data)==null?void 0:a.status)==0?l.push("/login"):(v.error("退出登录失败"),console.log(s))};return K(()=>{w&&p.value.push({key:"vnc",icon:()=>n(u,{icon:Y,style:{fontSize:"24px",margin:"8px 5px 0 0"}}),label:n("span",{style:{display:"inline-block",lineHeight:"38px",height:"45px",verticalAlign:"middle"}},"控制台"),title:"控制台"}),w&&p.value.push({key:"group",icon:()=>n(u,{icon:T,style:{fontSize:"24px",margin:"8px 5px 0 0"}}),label:n("span",{style:{display:"inline-block",lineHeight:"38px",height:"45px",verticalAlign:"middle"}},"组管理"),title:"组管理"});const s=localStorage.getItem("selectedMenu");s&&(m.value=[s])}),(s,a)=>{const o=f("a-menu"),h=f("a-menu-item"),M=f("a-dropdown");return A(),L(D,null,[H("div",c2,[o2,t(o,{class:"menu",selectedKeys:m.value,"onUpdate:selectedKeys":a[0]||(a[0]=k=>m.value=k),mode:"horizontal",items:p.value,onClick:c},null,8,["selectedKeys","items"]),t(M,null,{default:d(()=>[H("div",t2,[t(C(u),{icon:C(Q),class:"user-icon"},null,8,["icon"]),H("span",n2,j(C(V)),1)])]),overlay:d(()=>[t(o,null,{default:d(()=>[t(h,{key:"changePasswd",onClick:a[1]||(a[1]=k=>x({isShow:!0}))},{default:d(()=>[I(" 修改密码 ")]),_:1}),t(h,{key:"logout",onClick:r},{default:d(()=>[I(" 退出登录 ")]),_:1})]),_:1})]),_:1})]),t(a2,{isFormOpen:i.value,onRefreshList:x},null,8,["isFormOpen"])],64)}}}),l2=F(i2,[["__scopeId","data-v-5f912724"]]),r2={class:"main"},p2={class:"body"},d2=N({__name:"Page",setup(e){return(i,x)=>(A(),L("div",r2,[t(l2),H("div",p2,[q(i.$slots,"default",{},void 0,!0)])]))}}),g2=F(d2,[["__scopeId","data-v-99838b1f"]]);export{g2 as _,v2 as a,_2 as b,h2 as d,f2 as f,m2 as g};
